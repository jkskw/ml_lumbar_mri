# Global project configuration
project:
  name: "Lumbar Spine Degenerative Classification"
  description: "Automated evaluation of degenerative lumbar spine changes from MRI images using deep learning."
  seed: 42

# Kaggle API config
kaggle:
  competition: "rsna-2024-lumbar-spine-degenerative-classification"
  download_path: "./data"

# Data configuration
data:
  raw_path: "./data/raw"
  interim_path: "./data/interim/"
  processed_path: "./data/processed"

# Preprocessing parameters
preprocessing:
  target_disc: "L4/L5"
  final_depth: 1
  final_size: [96, 96]
  cropped_size: [512, 512]
  cropping:
    scs:
      sagt2:
        left: 96
        right: 32
        upper: 40
        lower: 40
    nfn:
      sagt1:
        left: 96
        right: 32
        upper: 40
        lower: 40
  mode: "target_window" # or "full_series"
  target_window:
    slices_before: 1
    slices_after: 1


# Model / Training configuration
training:
  # Possible values (4 modes):
  #  - single_multiclass
  #  - single_binary
  #  - multi_multiclass
  #  - multi_binary
  classification_mode: "single_multiclass"  
  
  # Disease used for single-disease modes
  disease: "lnfn"

  # Name of the folder in data/interim containing .pt files
  # selected_tensor_folder: "target_window_128x128_3D_B1A1"
  selected_tensor_folder: "target_window_128x128_3D_B1A1"

  # Model architecture: "simple_3dcnn", "advanced_single", "advanced_single_improved", "advanced_multi", "resnet3d"
  model_arch: "advanced_single_improved"
  
  # Splitting
  test_size: 0.2
  validation_split_of_temp: 0.5

  # Hyperparams
  batch_size: 16
  num_epochs: 200

  learning_rate: 0.001
  use_lr_scheduler: false
  lr_scheduler_patience: 5
  lr_scheduler_factor: 0.1

  dropout_prob: 0.5

  # Early stopping
  early_stopping_patience: 200

  excluded_studies:
    - 2780132468
    - 2492114990
    - 3294654272
    - 665627263

  # Handling imbalanced data
  imbalance:
    use_class_weights: true       # Set to true to apply class weighting in the loss function.
    use_weighted_sampler: false      # Set to true to use a WeightedRandomSampler in your DataLoader.
    loss_type: "cross_entropy"      # Options: "cross_entropy" or "focal"
    focal:
      alpha: [0.3, 0.8, 1.0]                   # Alpha parameter for focal loss.
      gamma: 3.0                    # Gamma parameter for focal loss.
